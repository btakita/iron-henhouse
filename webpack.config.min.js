const webpack = require("webpack")
    , CompressionPlugin = require("compression-webpack-plugin")
    , webpackConfigMin = Object.create(require("./webpack.config"))
    ;
webpackConfigMin.output.filename = "[name].min.js";
webpackConfigMin.plugins.push(
  new webpack.optimize.UglifyJsPlugin({minimize: true}),
  new CompressionPlugin({
    asset: "{file}.gz",
    algorithm: "gzip",
    regExp: /\.js$|\.html$/,
    threshold: 10240,
    minRatio: 0.8
  })
);
module.exports = webpackConfigMin;